import{_ as j}from"../chunks/preload-helper.a4192956.js";import{s as Q,n as F,r as G,d as q}from"../chunks/scheduler.ffbd56c5.js";import{S as K,i as W,s as S,g as c,m as X,D as Y,f as v,c as k,h as u,j as E,z as U,n as Z,k as l,a as z,x as s,E as J,y as B,F as $,o as tt}from"../chunks/index.02aeeab6.js";import{u as et,i as st,g as at}from"../chunks/navigation.f767a769.js";import{c as rt}from"../chunks/env.0a8cfa1c.js";function lt(p){let b,a,t,o,h='Link shortening <span class="text-eco-400">SustentÃ¡vel</span>',g,m,T="Turn long URLs into short, eco-friendly links with included QR Code",e,d,n,x,i,P,f,L=p[1]?"Shortening...":"ðŸŒ± Shorten Link",I,C,y,O='<div class="bg-white p-6 rounded-lg shadow"><div class="text-3xl mb-2">âš¡</div> <h3 class="font-semibold mb-2">Ultra Fast</h3> <p class="text-gray-600">Redirection in milliseconds</p></div> <div class="bg-white p-6 rounded-lg shadow"><div class="text-3xl mb-2">ðŸŒ±</div> <h3 class="font-semibold mb-2">Sustainable</h3> <p class="text-gray-600">Eco-friendly Infraestructure</p></div> <div class="bg-white p-6 rounded-lg shadow"><div class="text-3xl mb-2">ðŸ“Š</div> <h3 class="font-semibold mb-2">Analytics</h3> <p class="text-gray-600">Detailed metrics</p></div>',R,V;return{c(){b=S(),a=c("div"),t=c("div"),o=c("h1"),o.innerHTML=h,g=S(),m=c("p"),m.textContent=T,e=S(),d=c("div"),n=c("form"),x=c("div"),i=c("input"),P=S(),f=c("button"),I=X(L),C=S(),y=c("div"),y.innerHTML=O,this.h()},l(r){Y("svelte-ekfoov",document.head).forEach(v),b=k(r),a=u(r,"DIV",{class:!0});var A=E(a);t=u(A,"DIV",{class:!0});var _=E(t);o=u(_,"H1",{class:!0,"data-svelte-h":!0}),U(o)!=="svelte-dlw63r"&&(o.innerHTML=h),g=k(_),m=u(_,"P",{class:!0,"data-svelte-h":!0}),U(m)!=="svelte-127dpbm"&&(m.textContent=T),e=k(_),d=u(_,"DIV",{class:!0});var H=E(d);n=u(H,"FORM",{class:!0});var D=E(n);x=u(D,"DIV",{});var M=E(x);i=u(M,"INPUT",{type:!0,placeholder:!0,class:!0}),M.forEach(v),P=k(D),f=u(D,"BUTTON",{type:!0,class:!0});var N=E(f);I=Z(N,L),N.forEach(v),D.forEach(v),H.forEach(v),C=k(_),y=u(_,"DIV",{class:!0,"data-svelte-h":!0}),U(y)!=="svelte-mklzek"&&(y.innerHTML=O),_.forEach(v),A.forEach(v),this.h()},h(){document.title="EcoLink - Sustainable Shortener",l(o,"class","text-4xl font-bold text-gray-900 mb-4"),l(m,"class","text-xl text-gray-900 mb-8"),l(i,"type","url"),l(i,"placeholder","Paste your URL here..."),l(i,"class","input-eco w-full text-lg"),i.required=!0,l(f,"type","submit"),f.disabled=p[1],l(f,"class","btn-eco text-lg px-8 py-3 disabled:opacity-50"),l(n,"class","space-y-4"),l(d,"class","bg-white rounded-xl shadow-lg p-8 mb-8"),l(y,"class","grid md:grid-cols-3 gap-8 text-center"),l(t,"class","max-w-3xl mx-auto"),l(a,"class","text-center")},m(r,w){z(r,b,w),z(r,a,w),s(a,t),s(t,o),s(t,g),s(t,m),s(t,e),s(t,d),s(d,n),s(n,x),s(x,i),J(i,p[0]),s(n,P),s(n,f),s(f,I),s(t,C),s(t,y),R||(V=[B(i,"input",p[3]),B(n,"submit",$(p[2]))],R=!0)},p(r,[w]){w&1&&i.value!==r[0]&&J(i,r[0]),w&2&&L!==(L=r[1]?"Shortening...":"ðŸŒ± Shorten Link")&&tt(I,L),w&2&&(f.disabled=r[1])},i:F,o:F,d(r){r&&(v(b),v(a)),R=!1,G(V)}}}function nt(p,b,a){let t,o;q(p,et,e=>a(4,t=e)),q(p,st,e=>a(5,o=e));let h="",g=!1;async function m(){if(h){if(!o||!t){const{login:e}=await j(()=>import("../chunks/authService.f7fb7133.js"),["../chunks/authService.f7fb7133.js","../chunks/env.0a8cfa1c.js","../chunks/navigation.f767a769.js","../chunks/singletons.edde51cd.js","../chunks/scheduler.ffbd56c5.js"],import.meta.url),d=btoa(JSON.stringify({url:h}));e(d);return}a(1,g=!0);try{const e=await fetch(`${rt.apiUrl}/api/v1/links`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({url:h})});if(e.ok){const d=await e.json(),{pendingLink:n}=await j(()=>import("../chunks/navigation.f767a769.js").then(x=>x.b),["../chunks/navigation.f767a769.js","../chunks/singletons.edde51cd.js","../chunks/scheduler.ffbd56c5.js"],import.meta.url);n.set(d),at("/result")}else console.error("API Error:",e.status)}catch(e){console.error("Error shortening URL:",e)}finally{a(1,g=!1)}}}function T(){h=this.value,a(0,h)}return[h,g,m,T]}class pt extends K{constructor(b){super(),W(this,b,nt,lt,Q,{})}}export{pt as component};
